{"ast":null,"code":"// Browser Request\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// UMD HEADER START \n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.returnExports = factory();\n  }\n})(this, function () {\n  // UMD HEADER END\n\n  var XHR = XMLHttpRequest;\n  if (!XHR) throw new Error('missing XMLHttpRequest');\n  request.log = {\n    'trace': noop,\n    'debug': noop,\n    'info': noop,\n    'warn': noop,\n    'error': noop\n  };\n  var DEFAULT_TIMEOUT = 3 * 60 * 1000; // 3 minutes\n\n  //\n  // request\n  //\n\n  function request(options, callback) {\n    // The entry-point to the API: prep the options object and pass the real work to run_xhr.\n    if (typeof callback !== 'function') throw new Error('Bad callback given: ' + callback);\n    if (!options) throw new Error('No options given');\n    var options_onResponse = options.onResponse; // Save this for later.\n\n    if (typeof options === 'string') options = {\n      'uri': options\n    };else options = JSON.parse(JSON.stringify(options)); // Use a duplicate for mutating.\n\n    options.onResponse = options_onResponse; // And put it back.\n\n    if (options.verbose) request.log = getLogger();\n    if (options.url) {\n      options.uri = options.url;\n      delete options.url;\n    }\n    if (!options.uri && options.uri !== \"\") throw new Error(\"options.uri is a required argument\");\n    if (typeof options.uri != \"string\") throw new Error(\"options.uri must be a string\");\n    var unsupported_options = ['proxy', '_redirectsFollowed', 'maxRedirects', 'followRedirect'];\n    for (var i = 0; i < unsupported_options.length; i++) if (options[unsupported_options[i]]) throw new Error(\"options.\" + unsupported_options[i] + \" is not supported\");\n    options.callback = callback;\n    options.method = options.method || 'GET';\n    options.headers = options.headers || {};\n    options.body = options.body || null;\n    options.timeout = options.timeout || request.DEFAULT_TIMEOUT;\n    if (options.headers.host) throw new Error(\"Options.headers.host is not supported\");\n    if (options.json) {\n      options.headers.accept = options.headers.accept || 'application/json';\n      if (options.method !== 'GET') options.headers['content-type'] = 'application/json';\n      if (typeof options.json !== 'boolean') options.body = JSON.stringify(options.json);else if (typeof options.body !== 'string') options.body = JSON.stringify(options.body);\n    }\n\n    //BEGIN QS Hack\n    var serialize = function (obj) {\n      var str = [];\n      for (var p in obj) if (obj.hasOwnProperty(p)) {\n        str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n      }\n      return str.join(\"&\");\n    };\n    if (options.qs) {\n      var qs = typeof options.qs == 'string' ? options.qs : serialize(options.qs);\n      if (options.uri.indexOf('?') !== -1) {\n        //no get params\n        options.uri = options.uri + '&' + qs;\n      } else {\n        //existing get params\n        options.uri = options.uri + '?' + qs;\n      }\n    }\n    //END QS Hack\n\n    //BEGIN FORM Hack\n    var multipart = function (obj) {\n      //todo: support file type (useful?)\n      var result = {};\n      result.boundry = '-------------------------------' + Math.floor(Math.random() * 1000000000);\n      var lines = [];\n      for (var p in obj) {\n        if (obj.hasOwnProperty(p)) {\n          lines.push('--' + result.boundry + \"\\n\" + 'Content-Disposition: form-data; name=\"' + p + '\"' + \"\\n\" + \"\\n\" + obj[p] + \"\\n\");\n        }\n      }\n      lines.push('--' + result.boundry + '--');\n      result.body = lines.join('');\n      result.length = result.body.length;\n      result.type = 'multipart/form-data; boundary=' + result.boundry;\n      return result;\n    };\n    if (options.form) {\n      if (typeof options.form == 'string') throw 'form name unsupported';\n      if (options.method === 'POST') {\n        var encoding = (options.encoding || 'application/x-www-form-urlencoded').toLowerCase();\n        options.headers['content-type'] = encoding;\n        switch (encoding) {\n          case 'application/x-www-form-urlencoded':\n            options.body = serialize(options.form).replace(/%20/g, \"+\");\n            break;\n          case 'multipart/form-data':\n            var multi = multipart(options.form);\n            //options.headers['content-length'] = multi.length;\n            options.body = multi.body;\n            options.headers['content-type'] = multi.type;\n            break;\n          default:\n            throw new Error('unsupported encoding:' + encoding);\n        }\n      }\n    }\n    //END FORM Hack\n\n    // If onResponse is boolean true, call back immediately when the response is known,\n    // not when the full request is complete.\n    options.onResponse = options.onResponse || noop;\n    if (options.onResponse === true) {\n      options.onResponse = callback;\n      options.callback = noop;\n    }\n\n    // XXX Browsers do not like this.\n    //if(options.body)\n    //  options.headers['content-length'] = options.body.length;\n\n    // HTTP basic authentication\n    if (!options.headers.authorization && options.auth) options.headers.authorization = 'Basic ' + b64_enc(options.auth.username + ':' + options.auth.password);\n    return run_xhr(options);\n  }\n  var req_seq = 0;\n  function run_xhr(options) {\n    var xhr = new XHR(),\n      timed_out = false,\n      is_cors = is_crossDomain(options.uri),\n      supports_cors = ('withCredentials' in xhr);\n    req_seq += 1;\n    xhr.seq_id = req_seq;\n    xhr.id = req_seq + ': ' + options.method + ' ' + options.uri;\n    xhr._id = xhr.id; // I know I will type \"_id\" from habit all the time.\n\n    if (is_cors && !supports_cors) {\n      var cors_err = new Error('Browser does not support cross-origin request: ' + options.uri);\n      cors_err.cors = 'unsupported';\n      return options.callback(cors_err, xhr);\n    }\n    xhr.timeoutTimer = setTimeout(too_late, options.timeout);\n    function too_late() {\n      timed_out = true;\n      var er = new Error('ETIMEDOUT');\n      er.code = 'ETIMEDOUT';\n      er.duration = options.timeout;\n      request.log.error('Timeout', {\n        'id': xhr._id,\n        'milliseconds': options.timeout\n      });\n      return options.callback(er, xhr);\n    }\n\n    // Some states can be skipped over, so remember what is still incomplete.\n    var did = {\n      'response': false,\n      'loading': false,\n      'end': false\n    };\n    xhr.onreadystatechange = on_state_change;\n    xhr.open(options.method, options.uri, true); // asynchronous\n    if (is_cors) xhr.withCredentials = !!options.withCredentials;\n    xhr.send(options.body);\n    return xhr;\n    function on_state_change(event) {\n      if (timed_out) return request.log.debug('Ignoring timed out state change', {\n        'state': xhr.readyState,\n        'id': xhr.id\n      });\n      request.log.debug('State change', {\n        'state': xhr.readyState,\n        'id': xhr.id,\n        'timed_out': timed_out\n      });\n      if (xhr.readyState === XHR.OPENED) {\n        request.log.debug('Request started', {\n          'id': xhr.id\n        });\n        for (var key in options.headers) xhr.setRequestHeader(key, options.headers[key]);\n      } else if (xhr.readyState === XHR.HEADERS_RECEIVED) on_response();else if (xhr.readyState === XHR.LOADING) {\n        on_response();\n        on_loading();\n      } else if (xhr.readyState === XHR.DONE) {\n        on_response();\n        on_loading();\n        on_end();\n      }\n    }\n    function on_response() {\n      if (did.response) return;\n      did.response = true;\n      request.log.debug('Got response', {\n        'id': xhr.id,\n        'status': xhr.status\n      });\n      clearTimeout(xhr.timeoutTimer);\n      xhr.statusCode = xhr.status; // Node request compatibility\n\n      // Detect failed CORS requests.\n      if (is_cors && xhr.statusCode == 0) {\n        var cors_err = new Error('CORS request rejected: ' + options.uri);\n        cors_err.cors = 'rejected';\n\n        // Do not process this request further.\n        did.loading = true;\n        did.end = true;\n        return options.callback(cors_err, xhr);\n      }\n      options.onResponse(null, xhr);\n    }\n    function on_loading() {\n      if (did.loading) return;\n      did.loading = true;\n      request.log.debug('Response body loading', {\n        'id': xhr.id\n      });\n      // TODO: Maybe simulate \"data\" events by watching xhr.responseText\n    }\n\n    function on_end() {\n      if (did.end) return;\n      did.end = true;\n      request.log.debug('Request done', {\n        'id': xhr.id\n      });\n      xhr.body = xhr.responseText;\n      if (options.json) {\n        try {\n          xhr.body = JSON.parse(xhr.responseText);\n        } catch (er) {\n          return options.callback(er, xhr);\n        }\n      }\n      options.callback(null, xhr, xhr.body);\n    }\n  } // request\n\n  request.withCredentials = false;\n  request.DEFAULT_TIMEOUT = DEFAULT_TIMEOUT;\n\n  //\n  // defaults\n  //\n\n  request.defaults = function (options, requester) {\n    var def = function (method) {\n      var d = function (params, callback) {\n        if (typeof params === 'string') params = {\n          'uri': params\n        };else {\n          params = JSON.parse(JSON.stringify(params));\n        }\n        for (var i in options) {\n          if (params[i] === undefined) params[i] = options[i];\n        }\n        return method(params, callback);\n      };\n      return d;\n    };\n    var de = def(request);\n    de.get = def(request.get);\n    de.post = def(request.post);\n    de.put = def(request.put);\n    de.head = def(request.head);\n    return de;\n  };\n\n  //\n  // HTTP method shortcuts\n  //\n\n  var shortcuts = ['get', 'put', 'post', 'head'];\n  shortcuts.forEach(function (shortcut) {\n    var method = shortcut.toUpperCase();\n    var func = shortcut.toLowerCase();\n    request[func] = function (opts) {\n      if (typeof opts === 'string') opts = {\n        'method': method,\n        'uri': opts\n      };else {\n        opts = JSON.parse(JSON.stringify(opts));\n        opts.method = method;\n      }\n      var args = [opts].concat(Array.prototype.slice.apply(arguments, [1]));\n      return request.apply(this, args);\n    };\n  });\n\n  //\n  // CouchDB shortcut\n  //\n\n  request.couch = function (options, callback) {\n    if (typeof options === 'string') options = {\n      'uri': options\n    };\n\n    // Just use the request API to do JSON.\n    options.json = true;\n    if (options.body) options.json = options.body;\n    delete options.body;\n    callback = callback || noop;\n    var xhr = request(options, couch_handler);\n    return xhr;\n    function couch_handler(er, resp, body) {\n      if (er) return callback(er, resp, body);\n      if ((resp.statusCode < 200 || resp.statusCode > 299) && body.error) {\n        // The body is a Couch JSON object indicating the error.\n        er = new Error('CouchDB error: ' + (body.error.reason || body.error.error));\n        for (var key in body) er[key] = body[key];\n        return callback(er, resp, body);\n      }\n      return callback(er, resp, body);\n    }\n  };\n\n  //\n  // Utility\n  //\n\n  function noop() {}\n  function getLogger() {\n    var logger = {},\n      levels = ['trace', 'debug', 'info', 'warn', 'error'],\n      level,\n      i;\n    for (i = 0; i < levels.length; i++) {\n      level = levels[i];\n      logger[level] = noop;\n      if (typeof console !== 'undefined' && console && console[level]) logger[level] = formatted(console, level);\n    }\n    return logger;\n  }\n  function formatted(obj, method) {\n    return formatted_logger;\n    function formatted_logger(str, context) {\n      if (typeof context === 'object') str += ' ' + JSON.stringify(context);\n      return obj[method].call(obj, str);\n    }\n  }\n\n  // Return whether a URL is a cross-domain request.\n  function is_crossDomain(url) {\n    var rurl = /^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+))?)?/;\n\n    // jQuery #8138, IE may throw an exception when accessing\n    // a field from window.location if document.domain has been set\n    var ajaxLocation;\n    try {\n      ajaxLocation = location.href;\n    } catch (e) {\n      // Use the href attribute of an A element since IE will modify it given document.location\n      ajaxLocation = document.createElement(\"a\");\n      ajaxLocation.href = \"\";\n      ajaxLocation = ajaxLocation.href;\n    }\n    var ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || [],\n      parts = rurl.exec(url.toLowerCase());\n    var result = !!(parts && (parts[1] != ajaxLocParts[1] || parts[2] != ajaxLocParts[2] || (parts[3] || (parts[1] === \"http:\" ? 80 : 443)) != (ajaxLocParts[3] || (ajaxLocParts[1] === \"http:\" ? 80 : 443))));\n\n    //console.debug('is_crossDomain('+url+') -> ' + result)\n    return result;\n  }\n\n  // MIT License from http://phpjs.org/functions/base64_encode:358\n  function b64_enc(data) {\n    // Encodes string using MIME base64 algorithm\n    var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    var o1,\n      o2,\n      o3,\n      h1,\n      h2,\n      h3,\n      h4,\n      bits,\n      i = 0,\n      ac = 0,\n      enc = \"\",\n      tmp_arr = [];\n    if (!data) {\n      return data;\n    }\n\n    // assume utf8 data\n    // data = this.utf8_encode(data+'');\n\n    do {\n      // pack three octets into four hexets\n      o1 = data.charCodeAt(i++);\n      o2 = data.charCodeAt(i++);\n      o3 = data.charCodeAt(i++);\n      bits = o1 << 16 | o2 << 8 | o3;\n      h1 = bits >> 18 & 0x3f;\n      h2 = bits >> 12 & 0x3f;\n      h3 = bits >> 6 & 0x3f;\n      h4 = bits & 0x3f;\n\n      // use hexets to index into b64, and append result to encoded string\n      tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n    enc = tmp_arr.join('');\n    switch (data.length % 3) {\n      case 1:\n        enc = enc.slice(0, -2) + '==';\n        break;\n      case 2:\n        enc = enc.slice(0, -1) + '=';\n        break;\n    }\n    return enc;\n  }\n  return request;\n  //UMD FOOTER START\n});\n//UMD FOOTER END","map":{"version":3,"names":["root","factory","define","amd","exports","module","returnExports","XHR","XMLHttpRequest","Error","request","log","noop","DEFAULT_TIMEOUT","options","callback","options_onResponse","onResponse","JSON","parse","stringify","verbose","getLogger","url","uri","unsupported_options","i","length","method","headers","body","timeout","host","json","accept","serialize","obj","str","p","hasOwnProperty","push","encodeURIComponent","join","qs","indexOf","multipart","result","boundry","Math","floor","random","lines","type","form","encoding","toLowerCase","replace","multi","authorization","auth","b64_enc","username","password","run_xhr","req_seq","xhr","timed_out","is_cors","is_crossDomain","supports_cors","seq_id","id","_id","cors_err","cors","timeoutTimer","setTimeout","too_late","er","code","duration","error","did","onreadystatechange","on_state_change","open","withCredentials","send","event","debug","readyState","OPENED","key","setRequestHeader","HEADERS_RECEIVED","on_response","LOADING","on_loading","DONE","on_end","response","status","clearTimeout","statusCode","loading","end","responseText","defaults","requester","def","d","params","undefined","de","get","post","put","head","shortcuts","forEach","shortcut","toUpperCase","func","opts","args","concat","Array","prototype","slice","apply","arguments","couch","couch_handler","resp","reason","logger","levels","level","console","formatted","formatted_logger","context","call","rurl","ajaxLocation","location","href","e","document","createElement","ajaxLocParts","exec","parts","data","b64","o1","o2","o3","h1","h2","h3","h4","bits","ac","enc","tmp_arr","charCodeAt","charAt"],"sources":["/Users/aadityakhanal/Desktop/webdev/INF286P/LAB-10/LAB-10React/node_modules/browser-request/index.js"],"sourcesContent":["// Browser Request\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// UMD HEADER START \n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory();\n  }\n}(this, function () {\n// UMD HEADER END\n\nvar XHR = XMLHttpRequest\nif (!XHR) throw new Error('missing XMLHttpRequest')\nrequest.log = {\n  'trace': noop, 'debug': noop, 'info': noop, 'warn': noop, 'error': noop\n}\n\nvar DEFAULT_TIMEOUT = 3 * 60 * 1000 // 3 minutes\n\n//\n// request\n//\n\nfunction request(options, callback) {\n  // The entry-point to the API: prep the options object and pass the real work to run_xhr.\n  if(typeof callback !== 'function')\n    throw new Error('Bad callback given: ' + callback)\n\n  if(!options)\n    throw new Error('No options given')\n\n  var options_onResponse = options.onResponse; // Save this for later.\n\n  if(typeof options === 'string')\n    options = {'uri':options};\n  else\n    options = JSON.parse(JSON.stringify(options)); // Use a duplicate for mutating.\n\n  options.onResponse = options_onResponse // And put it back.\n\n  if (options.verbose) request.log = getLogger();\n\n  if(options.url) {\n    options.uri = options.url;\n    delete options.url;\n  }\n\n  if(!options.uri && options.uri !== \"\")\n    throw new Error(\"options.uri is a required argument\");\n\n  if(typeof options.uri != \"string\")\n    throw new Error(\"options.uri must be a string\");\n\n  var unsupported_options = ['proxy', '_redirectsFollowed', 'maxRedirects', 'followRedirect']\n  for (var i = 0; i < unsupported_options.length; i++)\n    if(options[ unsupported_options[i] ])\n      throw new Error(\"options.\" + unsupported_options[i] + \" is not supported\")\n\n  options.callback = callback\n  options.method = options.method || 'GET';\n  options.headers = options.headers || {};\n  options.body    = options.body || null\n  options.timeout = options.timeout || request.DEFAULT_TIMEOUT\n\n  if(options.headers.host)\n    throw new Error(\"Options.headers.host is not supported\");\n\n  if(options.json) {\n    options.headers.accept = options.headers.accept || 'application/json'\n    if(options.method !== 'GET')\n      options.headers['content-type'] = 'application/json'\n\n    if(typeof options.json !== 'boolean')\n      options.body = JSON.stringify(options.json)\n    else if(typeof options.body !== 'string')\n      options.body = JSON.stringify(options.body)\n  }\n  \n  //BEGIN QS Hack\n  var serialize = function(obj) {\n    var str = [];\n    for(var p in obj)\n      if (obj.hasOwnProperty(p)) {\n        str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n      }\n    return str.join(\"&\");\n  }\n  \n  if(options.qs){\n    var qs = (typeof options.qs == 'string')? options.qs : serialize(options.qs);\n    if(options.uri.indexOf('?') !== -1){ //no get params\n        options.uri = options.uri+'&'+qs;\n    }else{ //existing get params\n        options.uri = options.uri+'?'+qs;\n    }\n  }\n  //END QS Hack\n  \n  //BEGIN FORM Hack\n  var multipart = function(obj) {\n    //todo: support file type (useful?)\n    var result = {};\n    result.boundry = '-------------------------------'+Math.floor(Math.random()*1000000000);\n    var lines = [];\n    for(var p in obj){\n        if (obj.hasOwnProperty(p)) {\n            lines.push(\n                '--'+result.boundry+\"\\n\"+\n                'Content-Disposition: form-data; name=\"'+p+'\"'+\"\\n\"+\n                \"\\n\"+\n                obj[p]+\"\\n\"\n            );\n        }\n    }\n    lines.push( '--'+result.boundry+'--' );\n    result.body = lines.join('');\n    result.length = result.body.length;\n    result.type = 'multipart/form-data; boundary='+result.boundry;\n    return result;\n  }\n  \n  if(options.form){\n    if(typeof options.form == 'string') throw('form name unsupported');\n    if(options.method === 'POST'){\n        var encoding = (options.encoding || 'application/x-www-form-urlencoded').toLowerCase();\n        options.headers['content-type'] = encoding;\n        switch(encoding){\n            case 'application/x-www-form-urlencoded':\n                options.body = serialize(options.form).replace(/%20/g, \"+\");\n                break;\n            case 'multipart/form-data':\n                var multi = multipart(options.form);\n                //options.headers['content-length'] = multi.length;\n                options.body = multi.body;\n                options.headers['content-type'] = multi.type;\n                break;\n            default : throw new Error('unsupported encoding:'+encoding);\n        }\n    }\n  }\n  //END FORM Hack\n\n  // If onResponse is boolean true, call back immediately when the response is known,\n  // not when the full request is complete.\n  options.onResponse = options.onResponse || noop\n  if(options.onResponse === true) {\n    options.onResponse = callback\n    options.callback = noop\n  }\n\n  // XXX Browsers do not like this.\n  //if(options.body)\n  //  options.headers['content-length'] = options.body.length;\n\n  // HTTP basic authentication\n  if(!options.headers.authorization && options.auth)\n    options.headers.authorization = 'Basic ' + b64_enc(options.auth.username + ':' + options.auth.password);\n\n  return run_xhr(options)\n}\n\nvar req_seq = 0\nfunction run_xhr(options) {\n  var xhr = new XHR\n    , timed_out = false\n    , is_cors = is_crossDomain(options.uri)\n    , supports_cors = ('withCredentials' in xhr)\n\n  req_seq += 1\n  xhr.seq_id = req_seq\n  xhr.id = req_seq + ': ' + options.method + ' ' + options.uri\n  xhr._id = xhr.id // I know I will type \"_id\" from habit all the time.\n\n  if(is_cors && !supports_cors) {\n    var cors_err = new Error('Browser does not support cross-origin request: ' + options.uri)\n    cors_err.cors = 'unsupported'\n    return options.callback(cors_err, xhr)\n  }\n\n  xhr.timeoutTimer = setTimeout(too_late, options.timeout)\n  function too_late() {\n    timed_out = true\n    var er = new Error('ETIMEDOUT')\n    er.code = 'ETIMEDOUT'\n    er.duration = options.timeout\n\n    request.log.error('Timeout', { 'id':xhr._id, 'milliseconds':options.timeout })\n    return options.callback(er, xhr)\n  }\n\n  // Some states can be skipped over, so remember what is still incomplete.\n  var did = {'response':false, 'loading':false, 'end':false}\n\n  xhr.onreadystatechange = on_state_change\n  xhr.open(options.method, options.uri, true) // asynchronous\n  if(is_cors)\n    xhr.withCredentials = !! options.withCredentials\n  xhr.send(options.body)\n  return xhr\n\n  function on_state_change(event) {\n    if(timed_out)\n      return request.log.debug('Ignoring timed out state change', {'state':xhr.readyState, 'id':xhr.id})\n\n    request.log.debug('State change', {'state':xhr.readyState, 'id':xhr.id, 'timed_out':timed_out})\n\n    if(xhr.readyState === XHR.OPENED) {\n      request.log.debug('Request started', {'id':xhr.id})\n      for (var key in options.headers)\n        xhr.setRequestHeader(key, options.headers[key])\n    }\n\n    else if(xhr.readyState === XHR.HEADERS_RECEIVED)\n      on_response()\n\n    else if(xhr.readyState === XHR.LOADING) {\n      on_response()\n      on_loading()\n    }\n\n    else if(xhr.readyState === XHR.DONE) {\n      on_response()\n      on_loading()\n      on_end()\n    }\n  }\n\n  function on_response() {\n    if(did.response)\n      return\n\n    did.response = true\n    request.log.debug('Got response', {'id':xhr.id, 'status':xhr.status})\n    clearTimeout(xhr.timeoutTimer)\n    xhr.statusCode = xhr.status // Node request compatibility\n\n    // Detect failed CORS requests.\n    if(is_cors && xhr.statusCode == 0) {\n      var cors_err = new Error('CORS request rejected: ' + options.uri)\n      cors_err.cors = 'rejected'\n\n      // Do not process this request further.\n      did.loading = true\n      did.end = true\n\n      return options.callback(cors_err, xhr)\n    }\n\n    options.onResponse(null, xhr)\n  }\n\n  function on_loading() {\n    if(did.loading)\n      return\n\n    did.loading = true\n    request.log.debug('Response body loading', {'id':xhr.id})\n    // TODO: Maybe simulate \"data\" events by watching xhr.responseText\n  }\n\n  function on_end() {\n    if(did.end)\n      return\n\n    did.end = true\n    request.log.debug('Request done', {'id':xhr.id})\n\n    xhr.body = xhr.responseText\n    if(options.json) {\n      try        { xhr.body = JSON.parse(xhr.responseText) }\n      catch (er) { return options.callback(er, xhr)        }\n    }\n\n    options.callback(null, xhr, xhr.body)\n  }\n\n} // request\n\nrequest.withCredentials = false;\nrequest.DEFAULT_TIMEOUT = DEFAULT_TIMEOUT;\n\n//\n// defaults\n//\n\nrequest.defaults = function(options, requester) {\n  var def = function (method) {\n    var d = function (params, callback) {\n      if(typeof params === 'string')\n        params = {'uri': params};\n      else {\n        params = JSON.parse(JSON.stringify(params));\n      }\n      for (var i in options) {\n        if (params[i] === undefined) params[i] = options[i]\n      }\n      return method(params, callback)\n    }\n    return d\n  }\n  var de = def(request)\n  de.get = def(request.get)\n  de.post = def(request.post)\n  de.put = def(request.put)\n  de.head = def(request.head)\n  return de\n}\n\n//\n// HTTP method shortcuts\n//\n\nvar shortcuts = [ 'get', 'put', 'post', 'head' ];\nshortcuts.forEach(function(shortcut) {\n  var method = shortcut.toUpperCase();\n  var func   = shortcut.toLowerCase();\n\n  request[func] = function(opts) {\n    if(typeof opts === 'string')\n      opts = {'method':method, 'uri':opts};\n    else {\n      opts = JSON.parse(JSON.stringify(opts));\n      opts.method = method;\n    }\n\n    var args = [opts].concat(Array.prototype.slice.apply(arguments, [1]));\n    return request.apply(this, args);\n  }\n})\n\n//\n// CouchDB shortcut\n//\n\nrequest.couch = function(options, callback) {\n  if(typeof options === 'string')\n    options = {'uri':options}\n\n  // Just use the request API to do JSON.\n  options.json = true\n  if(options.body)\n    options.json = options.body\n  delete options.body\n\n  callback = callback || noop\n\n  var xhr = request(options, couch_handler)\n  return xhr\n\n  function couch_handler(er, resp, body) {\n    if(er)\n      return callback(er, resp, body)\n\n    if((resp.statusCode < 200 || resp.statusCode > 299) && body.error) {\n      // The body is a Couch JSON object indicating the error.\n      er = new Error('CouchDB error: ' + (body.error.reason || body.error.error))\n      for (var key in body)\n        er[key] = body[key]\n      return callback(er, resp, body);\n    }\n\n    return callback(er, resp, body);\n  }\n}\n\n//\n// Utility\n//\n\nfunction noop() {}\n\nfunction getLogger() {\n  var logger = {}\n    , levels = ['trace', 'debug', 'info', 'warn', 'error']\n    , level, i\n\n  for(i = 0; i < levels.length; i++) {\n    level = levels[i]\n\n    logger[level] = noop\n    if(typeof console !== 'undefined' && console && console[level])\n      logger[level] = formatted(console, level)\n  }\n\n  return logger\n}\n\nfunction formatted(obj, method) {\n  return formatted_logger\n\n  function formatted_logger(str, context) {\n    if(typeof context === 'object')\n      str += ' ' + JSON.stringify(context)\n\n    return obj[method].call(obj, str)\n  }\n}\n\n// Return whether a URL is a cross-domain request.\nfunction is_crossDomain(url) {\n  var rurl = /^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+))?)?/\n\n  // jQuery #8138, IE may throw an exception when accessing\n  // a field from window.location if document.domain has been set\n  var ajaxLocation\n  try { ajaxLocation = location.href }\n  catch (e) {\n    // Use the href attribute of an A element since IE will modify it given document.location\n    ajaxLocation = document.createElement( \"a\" );\n    ajaxLocation.href = \"\";\n    ajaxLocation = ajaxLocation.href;\n  }\n\n  var ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || []\n    , parts = rurl.exec(url.toLowerCase() )\n\n  var result = !!(\n    parts &&\n    (  parts[1] != ajaxLocParts[1]\n    || parts[2] != ajaxLocParts[2]\n    || (parts[3] || (parts[1] === \"http:\" ? 80 : 443)) != (ajaxLocParts[3] || (ajaxLocParts[1] === \"http:\" ? 80 : 443))\n    )\n  )\n\n  //console.debug('is_crossDomain('+url+') -> ' + result)\n  return result\n}\n\n// MIT License from http://phpjs.org/functions/base64_encode:358\nfunction b64_enc (data) {\n    // Encodes string using MIME base64 algorithm\n    var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc=\"\", tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    // assume utf8 data\n    // data = this.utf8_encode(data+'');\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1<<16 | o2<<8 | o3;\n\n        h1 = bits>>18 & 0x3f;\n        h2 = bits>>12 & 0x3f;\n        h3 = bits>>6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n        break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n        break;\n    }\n\n    return enc;\n}\n    return request;\n//UMD FOOTER START\n}));\n//UMD FOOTER END\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}